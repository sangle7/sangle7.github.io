---
title: 8个基本技巧来加速你的 JavaScript 代码
date: 2020-02-28 10:50:44
tags: 
  - 翻译
---

原文作者：[Mosh Hamedani](https://medium.com/javascript-in-plain-english/8-essential-tips-to-make-your-javascript-code-perform-faster-65fcae3c8b6e)

译者：Sangle

---

在 [StackOverflow 的调查](https://insights.stackoverflow.com/survey/2019#technology)中，JavaScript已连续第七年成为全球最受欢迎的语言。 随着JavaScript的日益普及，很明显，它是用于编码前端应用程序的最常用语言。 有趣的是，如果你的网站内容在两秒钟内没有加载，网站访问者就会失去兴趣或离开您的网站。 两秒钟的速度很难达到，这意味着您需要优化 JavaScript 代码以获得更好的性能。 在此博客文章中，我们将学习一些简单的技巧，您可以遵循这些技巧来保持 JavaScript 代码的简洁性并提高应用程序的整体性能。 让我们开始吧！

## 技巧 1: 尽量减少对 DOM 的操作

直接访问 [DOM（文档对象模型）](https://www.w3.org/TR/WD-DOM/introduction.html) 的成本很高。 如果您的应用程序需要多次访问 DOM 元素，则可以改为访问一次并将其用作局部变量。 请记住，如果您从DOM中删除此值，则该变量需要设置为null，以防止内存泄漏。

![DOM](https://sangle-1256136582.cos.ap-guangzhou.myqcloud.com/0_cisQHvz2LMyfwICc.png)

**React 和 Vue 利用虚拟 DOM**

在像 React 和 Vue 这样的现代 Web 库中，它们简化了 DOM 访问，使用了所谓的虚拟 DOM。 通过在实际 DOM上使用虚拟 DOM，React 和 Vue 表现出了出色的性能。 开发人员无需担心 React或 Vue 中的 DOM 访问在背后会发生什么。

如果您使用的是纯 JavaScript，则请确保尽可能减少对 DOM 的访问。


<!-- more -->

## 技巧 2: 删除未使用的代码和依赖

本技巧适用于所有编程语言。 删除未使用的代码和依赖，将确保您的代码编译速度更快，执行速度更快。 如果您在开发中遇到用户从未使用过的功能，那么这将是一个弃用与该功能相关的所有代码的好时机。 使用数据分析可以了解用户如何使用您的应用。 如果有些功能是绝对无法触及的，那么您随时可以与您的团队讨论并撤消这些功能。 这将确保您的 Web 应用加载速度更快。

我们也倾向于向我们的项目中添加大量的依赖包。 重点是要确保您的项目中没有任何不需要的依赖。 如果您能够在没有其他依赖的情况下对它们进行本地编码，那么也不要向第三方添加依赖项。

简洁明了的软件包将确保您的网站加载速度更快，并提高整体性能。



## 技巧 3: 使用异步调用

通过将异步代码用于API调用等功能，可以大大提高 JavaScript 代码的性能。 使用异步代码，不是阻塞 JavaScript具有的单个线程，而是将异步事件推送到队列，该队列在所有其他代码执行之后启动。 始终在代码中使用异步API。



## 技巧 4: 避免使用全局变量

您将听到已经使用 JavaScript 编码一段时间的同行们建议，尽可能避免使用全局变量。 其背后的原因是，JavaScript 引擎在运行时搜索全局范围中存在的变量所花费的时间更长。 避免全局变量的另一个原因是避免变量名冲突。 在 JavaScript 中，所有代码共享一个全局名称空间。 如果代码中有许多全局变量，则可能导致同一页面上的各个脚本之间发生冲突。

在下面的示例中，name是全局变量，并且具有全局范围。 它可以在任何地方使用。

```javascript
var name = "Adhithi Ravichandran";
// can access name
function myFunction() {
 // can access name
}
```

可以将其重写为具有本地范围。 我们可以重新编写代码并在函数中定义变量。 现在，名称变量的范围仅在函数内。

```javascript
// cannot access name
function myFunction() {
 var name = "Adhithi Ravichandran";
 // can access name
}
```

除非绝对必要，否则始终尝试在局部范围内使用变量，并避免编写全局变量。 您可以使用在 JavaScript `var`上具有本地范围的 JavaScript `let` 和 `const`。



## 技巧 5: 分析你的代码并消除内存泄漏 

内存泄漏是性能的杀手。 内存泄漏会占用越来越多的内存，最终会占用所有可用的内存空间，有时会使您的应用程序崩溃。 为了提高 JavaScript 性能，请确保您的代码没有内存泄漏。 这是我们开发人员都面临的普遍问题。 您可以使用 Chrome 开发者工具来跟踪内存泄漏。 “performance” 选项卡可让您深入了解内存泄漏。 定期留意代码中是否存在内存泄漏。



## 技巧 6: 利用缓存 

在浏览器中缓存文件将大大提高应用程序的性能，并加快网站的加载时间。 浏览器将对初始加载后加载的所有网页使用本地缓存的副本，而不是来回从网络中获取该副本。 这为用户提供了无缝的体验。

JavaScript service worker可用于缓存用户脱机时可以使用的文件。 这是创建渐进式Web应用程序（PWA）的重要部分。 用户在脱机时仍可以使用缓存的文件访问该站点。

**Lighthouse 工具**

Lighthouse 是用于提高网页质量的开源自动化工具。 您可以在公开或需要身份验证的任何网页上运行它。 该工具对于在您的网站上进行审核非常有用，并且根据其处理脱机呈现的能力，还可以指示您的网站是否符合渐进式Web应用程序（PWA）的条件。

您可以在 Chrome 开发者工具中，从命令行或作为 Node 模块运行 Lighthouse。 您为 Lighthouse 提供一个 URL进行审核，它对页面进行一系列审核，然后生成有关页面效果的报告。在报告页面上，会将失败的审核用作改进页面的指示。 每个审核都有一个参考文档，解释了为什么这个标准很重要以及如何解决它。



## 技巧 7: 精简代码

在所有开发团队中，JavaScript 代码的压缩都是一种常见的做法。 它是指从 JavaScript 源中删除所有不需要的或麻烦的代码。 删除注释，空格，缩短变量和函数名称等。

您可以使用 Google Closure 编译器等构建工具或 JS Compress，JS minifier 等在线工具来压缩代码。
这样可以大大提高您的 JavaScript 代码性能，因此请不要忘记这一步。



## 技巧 8：谨慎使用循环

本技巧适用于所有编程语言，尤其是 JavaScript。 当我们使用大量循环或嵌套循环时，会影响浏览器的性能。 要记住的一点是，要在循环外保持尽可能多的状态，并且仅在循环内进行所需的操作。 循环越少，JavaScript 代码就越快。 在这方面也要确保避免不必要的循环嵌套。

